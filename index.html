<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="Image_repository.js"></script>
    <script src="Names.js"></script>

    <script>
        const FASTMODE = true;
        //Choosing condition randomly

        const stage2Cond = (Math.floor(Math.random() * 2) == 0) ? 'Self' : 'Other';
        const cond0 = 'Moderate';
        const cond1 = 'Extreme';
        const condition = (Math.floor(Math.random() * 2) == 0) ? cond0 : cond1;
        //TEMP
        var gender = (Math.floor(Math.random() * 2) == 0) ? 'Male' : 'Female';
        const experimentNames = (gender == 'Male') ? M_names : F_names;

        var experimentObjects = FASTMODE ? [POSITIVE_IMAGES_OBJS[0], NEGATIVE_IMAGES_OBJS[0]] :
            jsPsych.randomization.repeat(POSITIVE_IMAGES_OBJS.concat(NEGATIVE_IMAGES_OBJS), 1);

        const names = FASTMODE ? experimentNames.slice(0, 2) : experimentNames;

        for (var i = 0; i < experimentObjects.length; i++) {
            experimentObjects[i].name=names[i];
            console.log(names[i]);
        }

        //Initializing variables
        var firstCondResponses = { Negative: [], Positive: [] };
        var firstCondDiffenece = { Negative: 0, Positive: 0 };
        const positiveImageAverage = 38;
        const negativeImageAverage = -42;

    </script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-slider-response-modified.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-call-function.js"></script>
    <script src="logic.js"></script>
    <script src="Slides.js"></script>
    <link rel="stylesheet" href="jspsych-6.1.0/css/jspsych.css" />
</head>
<body dir="rtl">
<script>

    var stage2 = (stage2Cond == 'Self') ? selfCond : otherCond;

    console.log(stage2Cond + ' '+condition + ' ' + gender);


    var allImages = POSITIVE_IMAGES_OBJS.concat(NEGATIVE_IMAGES_OBJS).concat(TRAINING_NEG_IMAGES_OBJS).concat(TRAINING_POS_IMAGES_OBJS);
    var IMAGES_TO_LOAD = [];

    for (var i=0; i<allImages.length; i++) {
        IMAGES_TO_LOAD.push('stimuli/'+allImages[i].index+'.jpg');
    }

    //initializing the exp
    timeline = [firstCond, calculateFirstCondDiffenece, stage2];
    jsPsych.init({
        timeline: timeline,
        preload_images: IMAGES_TO_LOAD
    });
</script>

</body>
</html>